/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
jQuery.sap.declare("fin.gl.glview.display.util.Status");fin.gl.glview.display.util.Status=(function(){function S(C,s){this.oController=C;this.statusName=s;this.fromDate=false;this.toDate=false;this.keyDate="";this.exRateDate="";this.exRateType="";this.dispCur="";}S.prototype.updateDates=function(){return undefined;};S.prototype.getFilters=function(){return undefined;};S.prototype.isValid=function(){return undefined;};S.prototype.getSorter=function(){var s=[];s.push(new sap.ui.model.Sorter("AssignmentReference",false,true));s.push(new sap.ui.model.Sorter("AccountingDocument",false,true));return s;};S.prototype.getCustomFields=function(){this.updateDates();var e=null;var E=null;var d=null;if(this.oController.isFieldInFilterItems(this.oController.getView().byId("fin.gl.glview.display.smartfilterbar"),"DisplayCurrency")){d=this.dispCur;}if(this.oController.isFieldInFilterItems(this.oController.getView().byId("fin.gl.glview.display.smartfilterbar"),"ExchangeRateType")){E=this.exRateType;}if(this.oController.isFieldInFilterItems(this.oController.getView().byId("fin.gl.glview.display.smartfilterbar"),"ExchangeRateDate")){e=this.exRateDate;}return{status:this.statusName,fromDate:this.fromDate,toDate:this.toDate,keyDate:this.keyDate,exRateDate:e,exRateType:E,dispCur:d};};function a(C){this.base=S;this.base(C,"Open");}a.prototype=new S();a.prototype.updateDates=function(){this.keyDate=this.oController.getView().byId("fin.gl.glview.display.sfb.KDpicker").getDateValue();this.exRateDate=this.oController.getView().byId("fin.gl.glview.display.sfb.ExRateDatePicker").getDateValue();this.exRateType=this.oController.getView().byId("fin.gl.glview.display.sfb.ExRateTypeInput").getValue();this.dispCur=this.oController.getView().byId("fin.gl.glview.display.sfb.DisplayCurrencyInput").getValue();};a.prototype.getFilters=function(){var f=[];this.updateDates();if(this.oController.getView().byId("fin.gl.glview.display.sfb.XOPVWselect").getSelectedKey()==="DDLB_EXCLUDE"){f.push(new sap.ui.model.Filter("IsOpenItemManaged",sap.ui.model.FilterOperator.EQ,"X"));}return f;};a.prototype.isValid=function(){this.updateDates();if(!this.keyDate){this.oController.oCustomErrorMessages.push({code:this.oController.textBundle.getText("ER_SEARCH"),type:"Error",message:this.oController.textBundle.getText("ERD1_KEYDATE")});this.oController.onMessagePopoverPressed(this.oController.getView().byId("fin.gl.glview.display.footer.button.alert"));return false;}else{return true;}};function b(C){this.base=S;this.base(C,"Cleared");}b.prototype=new S();b.prototype.updateDates=function(){this.keyDate=this.oController.getView().byId("fin.gl.glview.display.sfb.KDpicker").getDateValue();this.exRateDate=this.oController.getView().byId("fin.gl.glview.display.sfb.ExRateDatePicker").getDateValue();this.exRateType=this.oController.getView().byId("fin.gl.glview.display.sfb.ExRateTypeInput").getValue();this.dispCur=this.oController.getView().byId("fin.gl.glview.display.sfb.DisplayCurrencyInput").getValue();};b.prototype.getFilters=function(){var f=[];this.updateDates();return f;};b.prototype.isValid=function(){var t=null;var k=null;this.updateDates();if(this.keyDate!==null&&this.keyDate!==undefined&&this.keyDate!==""){k=this.keyDate;}var d=this.oController.getView().byId("fin.gl.glview.display.smartfilterbar").getFilters(["ClearingDate"]);if(d&&d[0]&&d[0].aFilters[0]&&d[0].aFilters[0].oValue2){t=d[0].aFilters[0].oValue2;}else if(d&&d[0]&&d[0].aFilters[0]&&d[0].aFilters[0].oValue1&&d[0].aFilters[0].sOperator==="LE"){t=d[0].aFilters[0].oValue1;}else if(d&&d[0]&&d[0].oValue2){t=d[0].oValue2;}else if(d&&d[0]&&d[0].oValue1&&d[0].sOperator==="LE"){t=d[0].oValue1;}if((k>=t)&&(t!==null)){this.oController.oCustomErrorMessages.push({code:this.oController.textBundle.getText("ER_SEARCH"),type:"Error",message:this.oController.textBundle.getText("ERD2_KEYDATE")});this.oController.onMessagePopoverPressed(this.oController.getView().byId("fin.gl.glview.display.footer.button.alert"));return false;}else{return true;}};function c(C){this.base=S;this.base(C,"All");}c.prototype=new S();c.prototype.updateDates=function(){this.exRateDate=this.oController.getView().byId("fin.gl.glview.display.sfb.ExRateDatePicker").getDateValue();this.exRateType=this.oController.getView().byId("fin.gl.glview.display.sfb.ExRateTypeInput").getValue();this.dispCur=this.oController.getView().byId("fin.gl.glview.display.sfb.DisplayCurrencyInput").getValue();};c.prototype.getFilters=function(){var f=[];this.updateDates();return f;};c.prototype.isValid=function(){return true;};return{StatusOpen:a,StatusCleared:b,StatusAll:c};})();
